<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>我的团队</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="css/fontastic.css">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="img/favicon.ico">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<body>
<div class="page">
    <!-- Main Navbar-->
    <header class="header">
        <nav class="navbar">
            <!-- Search Box-->
            <div class="search-box">
                <button class="dismiss"><i class="icon-close"></i></button>
                <form id="searchForm" action="#" role="search">
                    <input type="search" placeholder="What are you looking for..." class="form-control">
                </form>
            </div>
            <div class="container-fluid">
                <div class="navbar-holder d-flex align-items-center justify-content-between">
                    <!-- Navbar Header-->
                    <div class="navbar-header">
                        <!-- Navbar Brand --><a href="index.html" class="navbar-brand d-none d-sm-inline-block">
                        <div class="brand-text d-none d-lg-inline-block"><span>项目协作开发平台</span></div>
                        <div class="brand-text d-none d-sm-inline-block d-lg-none"><strong>BD</strong></div></a>
                        <!-- Toggle Button--><a id="toggle-btn" href="#" class="menu-btn active"><span></span><span></span><span></span></a>
                    </div>
                    <!-- Navbar Menu -->
                    <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
                        <!-- Notifications-->
                        <li class="nav-item dropdown"> <a id="notifications" rel="nofollow" data-target="#" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link"><i class="fa fa-bell-o"></i><span class="badge bg-red badge-corner">1</span></a>

                        </li>
                        <!-- Messages                        -->
                        <li class="nav-item dropdown"> <a id="messages" rel="nofollow" data-target="#" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link"><i class="fa fa-envelope-o"></i><span class="badge bg-orange badge-corner">2</span></a>

                        </li>

                        <!-- Logout    -->
                        <li class="nav-item"><a href="/login" class="nav-link logout"> <span class="d-none d-sm-inline">Logout</span><i class="fa fa-sign-out"></i></a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="page-content d-flex align-items-stretch">
        <!-- Side Navbar -->
        <nav class="side-navbar">
            <!-- Sidebar Header-->
            <a href="/settings">
                <div class="nav-link sidebar-header d-flex align-items-center ">
                    <div class="avatar">
                        <img src="img/avatar-1.jpg" alt="..." class="img-fluid rounded-circle" />
                    </div>
                    <div class="title">
                        <h1 class="h4" th:text="${session.login_user.getUserName()}"></h1>
                        <p th:text="${session.login_user.getEmail()}">Email</p>
                    </div>

                </div>
            </a>
            <!-- Sidebar Navidation Menus--><span class="heading">Main</span>
            <ul class="list-unstyled">
                <li><a th:href="@{'index?user_id='+${session.session_user_id}}"> <i class="icon-home"></i>主界面 </a></li>
                <li class="active"><a href="/team?user_id='+${session.session_user_id}}"> <i class="icon-grid"></i>团队 </a></li>
                <li><a th:href="@{'project?user_id='+${session.session_user_id}}"> <i class="fa fa-bar-chart"></i>项目</a></li>
                <li><a th:href="@{'GroupMeeting?user_id='+${session.session_user_id}}" > <i class="icon-padnote"></i>会议 </a></li>
                <li><a href="code" target="_blank"><i class="icon-screen"></i>代码</a></li>


            </ul>

        </nav>
        <div class="content-inner">
            <!-- Page Header-->
            <header class="page-header">
                <div class="container-fluid">
                    <div style="display: inline-flex">
                        <h2 class="no-margin-bottom" style="float: left;font-size: 20px">主界面</h2>
                        <!-- Button trigger modal -->
                        <button type="button" class="btn btn-primary" style="float: right;margin-left: 800px;font-size: 16px" data-toggle="modal" data-target="#myModal">
                            创建团队
                        </button>
                    </div>

                </div>
            </header>


            <!-- Modal -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 style="float: left">创建团队</h1>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        </div>
                        <div class="modal-body">
                            <form action="InsertTeam" method="post">
                                <div class="form-group">
                                    <label for="team_id" class="control-label">团队编号:</label>
                                    <input type="text" class="form-control" id="team_id" name="team_id" readonly="readonly" th:value="${newteam_id}">
                                </div>
                                <div class="form-group">
                                    <label for="team_name" class="control-label">团队昵称:</label>
                                    <input type="text" class="form-control" id="team_name" name="team_name">
                                </div>
                                <div class="form-group">
                                    <label for="note" class="control-label">备注信息:</label>
                                    <input type="text" class="form-control" id="note" name="note">
                                </div>
                                <div class="form-group">
                                    <label for="create_date" class="control-label">创建时间:</label>
                                    <input type="text"  id="create_date" class="form-control" readonly="readonly" name="create_date">

                                </div>
                                <div class="form-group">
                                    <label for="create_user_id" class="control-label">创建者ID:</label>
                                    <input type="text"  id="create_user_id" class="form-control" th:value="${session.session_user_id}" readonly="readonly" name="create_user_id">

                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                    <button type="submit" class="btn btn-primary">确认创建</button>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>

            <div>
                <section class="tables">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table" id="table">
                                                <thead>
                                                <tr >
                                                    <th>序列号</th>
                                                    <th>团队昵称</th>
                                                    <th>创建时间</th>
                                                    <th>操作</th>
                                                </tr>
                                                </thead>
                                                <tbody>


                                                <tr th:each="team : ${teams}">
                                                    <td class="id" id="id" style="display: none" th:text="${team.team_id}" scope="row"></td>
                                                    <td th:text="${teamStat.index+1}"></td>
                                                    <td th:text="${team.team_name}"></td>
                                                    <td th:text="${team.create_date}"></td>
                                                    <td><button onclick="clicke(this)">进入团队</button>

                                                    </td>

                                                </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>



                        </div>
                    </div>
                </section>
            </div>



        </div>
    </div>
</div>
<!-- JavaScript files-->

<script type="text/javascript">
    function create_date(){//构建方法
        var today=new Date();//new 出当前时间
        var h=today.getFullYear();//获取年
        var m=today.getMonth()+1;//获取月
        var d=today.getDate();//获取日
        var H = today.getHours();//获取时
        var M = today.getMinutes();//获取分
        var S = today.getSeconds();//获取秒
        return h+"-"+m+"-"+d+" "+H+":"+M+":"+S; //返回 年-月-日 时:分:秒
    }
    document.getElementById("create_date").value = create_date();//将获取到的 年-月-日 时:分:秒 赋给input文本输入框
</script>


<script th:inline="javascript">
    function clicke(x){
        var index = x.parentNode.parentNode.rowIndex;
        var team = $("table tr:eq("+index+") td:eq(0)").text();
        var userid = [[${session.session_user_id}]];
        //alert("要进入的团队编号为："+team);
        parent.location.href = "http://localhost:8080/groupInformation?team_id=" + Number(team) +"&user_id="+userid;


    }
</script>

<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/popper.js/umd/popper.min.js"> </script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="vendor/jquery.cookie/jquery.cookie.js"> </script>
<script src="vendor/chart.js/Chart.min.js"></script>
<script src="vendor/jquery-validation/jquery.validate.min.js"></script>
<script src="js/charts-home.js"></script>
<!-- Main File-->
<script src="js/front.js"></script>
</body>
</html>